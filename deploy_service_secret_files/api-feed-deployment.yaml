apiVersion: apps/v1
kind: Deployment
metadata:
  name: api-feed
  labels: 
    app: api-feed
spec: 
  replicas: 1
  selector: 
    matchLabels:
      app:  api-feed   
  template: 
    metadata: 
      labels: 
        app: api-feed
    spec: 
      containers: 
      - name: api-feed
        image: trustekpo/udagram-api-feed:v5a
        imagePullPolicy: Always
        resources: 
          requests: 
            memory: "64Mi"
            cpu: "250m"
          limits: 
            memory: "1024Mi"
            cpu: "500m"
        envFrom:
          - secretRef: 
              name: env-secret
          - configMapRef:
              name: env-configmap
          - secretRef: 
              name: aws-secret
        ports:
          - containerPort: 8080
      restartPolicy: Always